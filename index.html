<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Jan Lönnqvist | Graphic Designer</title>
<style>@font-face{font-family:'Diatype Variable';src:url('fonts/DiatypeVariable.woff2') format('woff2');font-weight:200 1000;font-display:swap;}*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#08081a;--text:rgba(255,255,255,.95);--text-60:rgba(255,255,255,.82);--text-40:rgba(255,255,255,.55);--text-25:rgba(255,255,255,.30);--accent:#c8965a;--accent-alt:#5e8aad}html{scroll-behavior:auto}body{font-family:'Diatype Variable',-apple-system,sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;-webkit-font-smoothing:antialiased;cursor:none}#webgl{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0}#cursor-canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1;pointer-events:none}.flashlight{position:fixed;width:600px;height:600px;border-radius:50%;pointer-events:none;z-index:2;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(200,150,90,.035) 0%,rgba(160,140,120,.012) 30%,transparent 70%);mix-blend-mode:screen;opacity:0;transition:opacity .5s}.flashlight.active{opacity:1}.custom-cursor{position:fixed;width:16px;height:16px;border-radius:50%;border:1.5px solid rgba(255,255,255,.5);pointer-events:none;z-index:9999;transform:translate(-50%,-50%);transition:width .3s,height .3s,border-color .3s,background .3s}.custom-cursor.hovering{width:48px;height:48px;border-color:var(--accent);background:rgba(255,255,255,.06)}#scroll-spacer{height:1000vh;position:relative;z-index:-1}nav{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;align-items:center;padding:20px 40px;pointer-events:auto}nav .logo{width:56px;height:56px;flex-shrink:0;margin:-8px 0}nav .logo svg{width:100%;height:100%;animation:logoSpin 12s linear infinite}nav .logo svg text{font-family:'Diatype Variable',sans-serif;font-size:14px;font-weight:700;letter-spacing:3px;text-transform:uppercase;fill:var(--accent)}@keyframes logoSpin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}nav .nav-links a{font-size:.72rem;font-weight:400;letter-spacing:.12em;text-transform:uppercase;color:var(--text-40);text-decoration:none;margin-left:28px;transition:color .3s;cursor:none}nav .nav-links a:hover{color:var(--text)}.hero-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-end;padding:0 6vw 10vh;z-index:50;pointer-events:none;transition:opacity .6s}.hero-overlay.hidden{opacity:0}.hero-name{font-size:clamp(3rem,10vw,9rem);font-weight:800;line-height:.88;letter-spacing:-.05em;text-shadow:0 0 80px rgba(255,255,255,.06),0 4px 30px rgba(0,0,0,.6)}.hero-role{font-size:clamp(.7rem,1.2vw,1rem);font-weight:500;letter-spacing:.2em;text-transform:uppercase;color:var(--accent);margin-top:24px}.hero-team{font-size:clamp(.65rem,1vw,.85rem);font-weight:350;letter-spacing:.15em;text-transform:uppercase;color:var(--text-40);margin-top:6px}.zone-text{position:fixed;z-index:50;pointer-events:none;max-width:400px;opacity:0;transition:opacity .8s ease,transform .8s cubic-bezier(.16,1,.3,1)}.zone-text.left{left:5vw;top:50%;transform:translateY(-50%) translateX(-30px)}.zone-text.left.active{opacity:1;transform:translateY(-50%) translateX(0)}.zone-text.right{right:5vw;top:50%;transform:translateY(-50%) translateX(30px);text-align:right}.zone-text.right.active{opacity:1;transform:translateY(-50%) translateX(0)}.zone-text .label{font-weight:600;font-size:clamp(.6rem,.9vw,.72rem);letter-spacing:.22em;text-transform:uppercase;color:var(--accent);margin-bottom:10px;display:block}.zone-text h2{font-weight:700;font-size:clamp(1.4rem,3vw,2.2rem);letter-spacing:-.03em;line-height:1.1;margin-bottom:12px;text-shadow:0 2px 20px rgba(0,0,0,.9),0 0 40px rgba(0,0,0,.6)}.zone-text p{font-weight:350;font-size:clamp(.85rem,1.3vw,1rem);line-height:1.65;color:var(--text-60);text-shadow:0 2px 12px rgba(0,0,0,.9),0 0 30px rgba(0,0,0,.5);text-wrap:pretty}.zone-text .highlight{color:var(--text);font-weight:500}.zone-text .tools{margin-top:14px;font-size:clamp(.7rem,1vw,.82rem);color:var(--text-40);letter-spacing:.05em;line-height:1.8;text-shadow:0 2px 12px rgba(0,0,0,.9);text-wrap:pretty}.cta-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:50;pointer-events:none;opacity:0;transition:opacity .8s ease}.cta-overlay.active{opacity:1}.cta-portrait{width:140px;height:140px;border-radius:50%;object-fit:cover;margin-bottom:28px;box-shadow:0 0 60px rgba(200,150,90,.12),0 0 120px rgba(0,0,0,.5)}.cta-title{font-size:clamp(2rem,5vw,4rem);font-weight:700;letter-spacing:-.03em;text-align:center;text-shadow:0 2px 20px rgba(0,0,0,.8)}.cta-body{font-size:clamp(.85rem,1.2vw,1rem);color:var(--text-60);text-align:center;max-width:420px;margin-top:12px;line-height:1.6;text-shadow:0 2px 12px rgba(0,0,0,.9);text-wrap:pretty}.cta-links{margin-top:20px;text-align:center;line-height:2.2;font-size:clamp(.85rem,1.2vw,1rem)}.cta-links a{color:var(--text);text-decoration:none;pointer-events:auto;cursor:none;border-bottom:1px solid var(--text-40);transition:border-color .3s}.cta-links a:hover{border-color:var(--text)}.zone-marker{position:fixed;z-index:45;right:40px;bottom:40px;font-size:.65rem;font-weight:500;letter-spacing:.2em;text-transform:uppercase;color:var(--text-25);transition:opacity .5s}.zone-marker .num{color:var(--accent);margin-right:8px}.progress-bar{position:fixed;left:0;top:0;height:2px;z-index:101;background:var(--accent);width:0%;transition:width .1s linear}.scroll-hint{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);z-index:50;font-size:.72rem;letter-spacing:.15em;text-transform:uppercase;color:var(--text-40);opacity:1;transition:opacity .8s;pointer-events:none}.scroll-hint.hidden{opacity:0}.scroll-hint span{display:inline-block;animation:scrollBounce 2s ease-in-out infinite}@keyframes scrollBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(6px)}}#loader{position:fixed;top:0;left:0;width:100%;height:100%;background:#08081a;z-index:200;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:12px}#loader .bar{width:120px;height:2px;background:rgba(255,255,255,.06);overflow:hidden}#loader .bar-fill{width:0%;height:100%;background:var(--accent);transition:width .3s ease}#loader .loader-text{font-size:.6rem;letter-spacing:.2em;text-transform:uppercase;color:var(--text-25);transition:opacity .4s}#loader.warp .loader-text,#loader.warp .bar{opacity:0}#loader .warp-flash{position:absolute;width:200px;height:200px;border-radius:50%;background:white;opacity:0;transform:scale(0);pointer-events:none;will-change:transform,opacity}#loader.warp .warp-flash{animation:warpFlash 1.8s cubic-bezier(.22,1,.36,1) forwards}@keyframes warpFlash{0%{opacity:0;transform:scale(0)}15%{opacity:1;transform:scale(.02)}50%{opacity:.9;transform:scale(4)}85%{opacity:.6;transform:scale(12)}100%{opacity:0;transform:scale(16)}}#loader .warp-ring{position:absolute;width:200px;height:200px;border-radius:50%;border:1px solid rgba(255,255,255,.4);opacity:0;pointer-events:none;will-change:transform,opacity}#loader.warp .warp-ring{animation:warpRing 1.6s cubic-bezier(.16,1,.3,1) .1s forwards}#loader.warp .warp-ring:nth-child(4){animation-delay:.25s;border-color:rgba(200,150,90,.3)}#loader.warp .warp-ring:nth-child(5){animation-delay:.4s;border-color:rgba(94,138,173,.3)}@keyframes warpRing{0%{opacity:0;transform:scale(0)}20%{opacity:.8}100%{opacity:0;transform:scale(8)}}#loader.done{opacity:0;pointer-events:none;transition:opacity .6s ease .2s}.magnetic{transition:transform .3s cubic-bezier(.16,1,.3,1)}@media(max-width:768px){body{cursor:auto}.custom-cursor,.flashlight,#cursor-canvas{display:none}nav{padding:14px 18px}.hero-overlay{padding:0 5vw 8vh}.hero-name{font-size:clamp(2.4rem,9vw,5rem)}.zone-text{max-width:90vw;top:auto;bottom:6vh;transform:none}.zone-text.left{left:5vw;transform:translateX(-30px)}.zone-text.left.active{transform:translateX(0)}.zone-text.right{right:5vw;text-align:left;transform:translateX(30px)}.zone-text.right.active{transform:translateX(0)}.zone-marker{right:16px;bottom:16px}}</style>
<script>
// Force scroll to top on every page load/refresh
if('scrollRestoration' in history) history.scrollRestoration='manual';
window.scrollTo(0,0);
// Protection: disable right-click, devtools shortcuts, text selection, drag
document.addEventListener('contextmenu',function(e){e.preventDefault()});
document.addEventListener('keydown',function(e){
// Block F12, Ctrl+Shift+I/J/C, Ctrl+U
if(e.key==='F12')e.preventDefault();
if(e.ctrlKey&&e.shiftKey&&['I','i','J','j','C','c'].includes(e.key))e.preventDefault();
if(e.ctrlKey&&['u','U','s','S'].includes(e.key))e.preventDefault();
if(e.metaKey&&e.altKey&&['I','i','J','j','C','c'].includes(e.key))e.preventDefault();
if(e.metaKey&&['u','U','s','S'].includes(e.key))e.preventDefault();
});
document.addEventListener('dragstart',function(e){e.preventDefault()});
document.addEventListener('selectstart',function(e){
if(e.target.closest&&(e.target.closest('a')||e.target.closest('input')))return;
e.preventDefault()});
</script>
</head>
<body>
<div id="loader"><div class="loader-text">Entering</div><div class="bar"><div class="bar-fill" id="loaderFill"></div></div><div class="warp-flash"></div><div class="warp-ring"></div><div class="warp-ring"></div><div class="warp-ring"></div></div>
<div class="custom-cursor" id="customCursor"></div>
<div class="flashlight" id="flashlight"></div>
<canvas id="webgl"></canvas>
<canvas id="cursor-canvas"></canvas>
<div class="progress-bar" id="progressBar"></div>
<nav>
<div class="logo"><svg viewBox="0 0 100 100"><defs><path id="cp" d="M 50,50 m -28,0 a 28,28 0 1,1 56,0 a 28,28 0 1,1 -56,0" fill="none"/></defs><text><textPath href="#cp">JAN LÖNNQVIST •</textPath></text></svg></div>
<div class="nav-links"><a href="#" class="magnetic" onclick="scrollToZone(0);return false">Start</a><a href="#" class="magnetic" onclick="scrollToZone(3);return false">Work</a><a href="#" class="magnetic" onclick="scrollToZone(5);return false">Contact</a></div>
</nav>
<div class="hero-overlay" id="heroOverlay"><div class="hero-name" data-scramble>JAN<br>LÖNNQVIST</div><div class="hero-role">Graphic Designer</div><div class="hero-team">Brand · Print · Digital · Multi-Market</div></div>
<div class="zone-text left" data-zone="production"><span class="label">2013 – 2018 · Helsinki</span><h2 data-scramble>Production Precision</h2><p>Five years shaping brand identities, campaigns, and corporate communications across print and digital at Multiprint, Lönnberg, Cocomms, Pixmill, and Planex. <span class="highlight">Prepress, offset printing, colour management, and production pipelines.</span> The physical precision that underpins everything.</p></div>
<div class="zone-text right" data-zone="brand"><span class="label">2019 – 2020</span><h2 data-scramble>Brand Leadership</h2><p>Lookbook design for Filling Pieces and <span style="white-space:nowrap">art direction at Valve.</span> At IKEA, <span class="highlight">led and photographed <em>Luonnollisesti arvokasta</em></span> (Naturally Valuable), a sustainability campaign that helped preserve an old-growth forest, translating global brand guidelines <span style="white-space:nowrap">into locally valuable action.</span></p></div>
<div class="zone-text left" data-zone="scale"><span class="label">2021 – 2023 · Amsterdam</span><h2 data-scramble>Localized at Scale</h2><p>At HelloFresh, <span class="highlight">led a team of three</span> responsible for print across BENELUX and France.<br><br>At Rituals, <span class="highlight">campaign design, packaging, and in-store visuals</span> across key markets and moments, including Hammam and Legend of the Dragon.<br><br>At DHL, campaigns across 12+ markets, 26 locations, and <span style="white-space:nowrap">20% of targeted leads in month one.</span></p></div>
<div class="zone-text right" data-zone="global"><span class="label">2024 – Present</span><h2 data-scramble>EMEA-Wide Design</h2><p>At GLS Group, designing across <span class="highlight">40+ countries</span>, building group-level design systems across Europe and the U.S. Logo design, campaign design, print, video, and <span class="highlight">AI-assisted workflows</span> <span style="white-space:nowrap">from concept through delivery.</span></p><div class="tools">Figma · Photoshop · Illustrator · InDesign · After Effects · Premiere Pro · AI</div></div>
<div class="cta-overlay" id="ctaOverlay" data-zone="cta"><img class="cta-portrait" src="img/Jan-copy.jpg" alt="Jan Lönnqvist"><div class="cta-title" data-scramble>Let's Connect</div><div class="cta-body">Brand design, multi-market campaigns,<br>and production that scales. Based in The Netherlands.</div><div class="cta-links"><a href="mailto:jan.lonnqvist@windowslive.com" class="magnetic">jan.lonnqvist@windowslive.com</a><br><a href="tel:+31619584748" class="magnetic">+31 619 584 748</a></div></div>
<div class="zone-marker" id="zoneMarker"><span class="num">01</span><span id="zoneLabel">ENTER</span></div>
<div class="scroll-hint" id="scrollHint"><span>↓ Drive</span></div>
<div id="scroll-spacer"></div>

<script type="importmap">
{"imports":{"three":"https://unpkg.com/three@0.160.0/build/three.module.js","three/addons/":"https://unpkg.com/three@0.160.0/examples/jsm/"}}
</script>
<script type="module">
import*as THREE from'three'; import{EffectComposer}from'three/addons/postprocessing/EffectComposer.js'; import{RenderPass}from'three/addons/postprocessing/RenderPass.js'; import{UnrealBloomPass}from'three/addons/postprocessing/UnrealBloomPass.js'; import{ShaderPass}from'three/addons/postprocessing/ShaderPass.js'; const M=/Mobi|Android/i.test(navigator.userAgent)||window.innerWidth<768; const cursorEl=document.getElementById('customCursor'),flashEl=document.getElementById('flashlight'); const tC=document.getElementById('cursor-canvas'),tCtx=tC.getContext('2d'); let mx=-100,my=-100,smx=-100,smy=-100,mVx=0,mVy=0,pmx=-100,pmy=-100; const trail=[]; function rTC(){tC.width=innerWidth;tC.height=innerHeight}rTC(); document.addEventListener('mousemove',e=>{mx=e.clientX;my=e.clientY;mVx=mx-pmx;mVy=my-pmy;pmx=mx;pmy=my;if(!flashEl.classList.contains('active'))flashEl.classList.add('active')}); document.addEventListener('mouseleave',()=>flashEl.classList.remove('active')); document.querySelectorAll('.magnetic').forEach(el=>{ el.addEventListener('mouseenter',()=>cursorEl.classList.add('hovering')); el.addEventListener('mouseleave',()=>{cursorEl.classList.remove('hovering');el.style.transform=''}); el.addEventListener('mousemove',e=>{const r=el.getBoundingClientRect();el.style.transform=`translate(${(e.clientX-r.left-r.width/2)*.25}px,${(e.clientY-r.top-r.height/2)*.25}px)`}); }); function animCursor(){requestAnimationFrame(animCursor);smx+=(mx-smx)*.15;smy+=(my-smy)*.15; cursorEl.style.left=smx+'px';cursorEl.style.top=smy+'px';flashEl.style.left=smx+'px';flashEl.style.top=smy+'px'; const sp=Math.sqrt(mVx*mVx+mVy*mVy);trail.unshift({x:smx,y:smy,s:Math.min(sp,30)});if(trail.length>40)trail.pop(); tCtx.clearRect(0,0,tC.width,tC.height);if(trail.length>2){tCtx.beginPath();tCtx.moveTo(trail[0].x,trail[0].y); for(let i=1;i<trail.length;i++){const p=trail[i],v=trail[i-1];tCtx.quadraticCurveTo(v.x,v.y,(v.x+p.x)/2,(v.y+p.y)/2)} const g=tCtx.createLinearGradient(trail[0].x,trail[0].y,trail[trail.length-1].x,trail[trail.length-1].y); g.addColorStop(0,`rgba(200,150,90,${Math.min(sp*.01,.3)})`);g.addColorStop(.5,`rgba(255,255,255,${Math.min(sp*.005,.1)})`);g.addColorStop(1,'rgba(255,255,255,0)'); tCtx.strokeStyle=g;tCtx.lineWidth=1.5+sp*.08;tCtx.lineCap='round';tCtx.stroke()}} if(!M)animCursor(); const CH='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&'; function scramble(el){const o=el.textContent,c=o.split('');let f=0;(function t(){const p=f/25,r=Math.floor(p*c.length);let s='';for(let i=0;i<c.length;i++){if(c[i]===' '||c[i]==='\n'){s+=c[i];continue}s+=i<r?c[i]:CH[Math.floor(Math.random()*CH.length)]}el.textContent=s;f++;f<=25?requestAnimationFrame(t):el.textContent=o})()} let sP=0,sV=0,lSY=0; const sHint=document.getElementById('scrollHint'),pBar=document.getElementById('progressBar'),heroOv=document.getElementById('heroOverlay'); function gSP(){const d=document.documentElement.scrollHeight-innerHeight;return d<=0?0:Math.max(0,Math.min(1,scrollY/d))} addEventListener('scroll',()=>{const sy=scrollY;sV=(sy-lSY)*.01;lSY=sy;sP=gSP();sHint.classList.toggle('hidden',sP>.03);pBar.style.width=(sP*100)+'%';heroOv.classList.toggle('hidden',sP>.08)},{passive:true}); window.scrollToZone=function(i){const t=[0,.12,.30,.50,.70,.88];const d=document.documentElement.scrollHeight-innerHeight;scrollTo({top:(t[i]||0)*d,behavior:'smooth'})}; const zTexts=document.querySelectorAll('.zone-text'),ctaOv=document.getElementById('ctaOverlay'); const zMN=document.querySelector('.zone-marker .num'),zL=document.getElementById('zoneLabel'),scr=new Set(); const zones=[{n:'hero',l:'ENTER',s:0,e:.10},{n:'production',l:'PRODUCTION',s:.10,e:.27},{n:'brand',l:'BRAND',s:.27,e:.44},{n:'scale',l:'SCALE',s:.44,e:.62},{n:'global',l:'GLOBAL',s:.62,e:.80},{n:'cta',l:'CONTACT',s:.80,e:1}]; function updZ(){let cur=zones[0];for(const z of zones)if(sP>=z.s&&sP<z.e){cur=z;break}if(sP>=zones[5].s)cur=zones[5]; zTexts.forEach(p=>{const a=p.dataset.zone===cur.n,w=p.classList.contains('active');p.classList.toggle('active',a);if(a&&!w)p.querySelectorAll('[data-scramble]').forEach(e=>{if(!scr.has(e)){scr.add(e);scramble(e)}})}); const ca=cur.n==='cta',cw=ctaOv.classList.contains('active');ctaOv.classList.toggle('active',ca);if(ca&&!cw)ctaOv.querySelectorAll('[data-scramble]').forEach(e=>{if(!scr.has(e)){scr.add(e);scramble(e)}}); if(cur.n==='hero')heroOv.querySelectorAll('[data-scramble]').forEach(e=>{if(!scr.has(e)){scr.add(e);scramble(e)}}); const idx=zones.indexOf(cur)+1;if(zMN)zMN.textContent=String(idx).padStart(2,'0');if(zL)zL.textContent=cur.l} const PostFX={uniforms:{tDiffuse:{value:null},uTime:{value:0}}, vertexShader:`varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}`, fragmentShader:`uniform sampler2D tDiffuse;uniform float uTime;varying vec2 vUv; float rnd(vec2 c){return fract(sin(dot(c,vec2(12.9898,78.233)))*43758.5453);} void main(){vec2 uv=vUv,d=uv-.5;float l=length(d),ab=.0012*l; float r=texture2D(tDiffuse,uv+d*ab).r,g=texture2D(tDiffuse,uv).g,b=texture2D(tDiffuse,uv-d*ab).b; vec3 c=vec3(r,g,b); c+=rnd(uv+fract(uTime))*.008-.004; float vig=smoothstep(.45,.85,l);c*=1.-vig*.55; gl_FragColor=vec4(c,1.);}`}; const FloorSh={ vertexShader:`varying vec3 vW;void main(){vec4 w=modelMatrix*vec4(position,1.);vW=w.xyz;gl_Position=projectionMatrix*viewMatrix*w;}`, fragmentShader:`uniform float uTime,uScroll;varying vec3 vW; float hash(vec2 p){return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453);} float noise(vec2 p){vec2 i=floor(p),f=fract(p);f=f*f*(3.-2.*f); return mix(mix(hash(i),hash(i+vec2(1,0)),f.x),mix(hash(i+vec2(0,1)),hash(i+vec2(1,1)),f.x),f.y);} float fbm(vec2 p){float v=0.,a=.5;for(int i=0;i<4;i++){v+=a*noise(p);p*=2.;a*=.5;}return v;} void main(){ float z=vW.z+uScroll*150.,x=vW.x; vec2 p=vec2(x*.04,z*.04); float n=fbm(p+uTime*.015)+fbm(p*2.-uTime*.01)*.4; float dist=length(vec2(x,vW.z+250.)); float fade=1.-smoothstep(30.,180.,dist); float center=exp(-x*x*.003); vec3 col=mix(vec3(.04,.04,.10),vec3(.08,.07,.14),n); col=mix(col,vec3(.14,.10,.06),n*n*center*.4); float a=n*.1*fade+center*.03; gl_FragColor=vec4(col,a);}`}; const canvas=document.getElementById('webgl'); const R=new THREE.WebGLRenderer({canvas,antialias:true,alpha:true,powerPreference:'high-performance'}); R.setSize(innerWidth,innerHeight);R.setPixelRatio(Math.min(devicePixelRatio,2));R.setClearColor(0x08081a,1); R.toneMapping=THREE.NoToneMapping;R.outputColorSpace=THREE.SRGBColorSpace; const scene=new THREE.Scene();scene.fog=new THREE.FogExp2(0x08081a,.002); const cam=new THREE.PerspectiveCamera(65,innerWidth/innerHeight,.1,1000);cam.position.set(0,6,12); const pxr=Math.min(devicePixelRatio,2); const rtW=Math.floor(innerWidth*pxr),rtH=Math.floor(innerHeight*pxr); const rt=new THREE.WebGLRenderTarget(rtW,rtH,{minFilter:THREE.LinearFilter,magFilter:THREE.LinearFilter,format:THREE.RGBAFormat}); const comp=new EffectComposer(R,rt);comp.setSize(rtW,rtH);comp.addPass(new RenderPass(scene,cam)); if(!M){const bloom=new UnrealBloomPass(new THREE.Vector2(rtW,rtH),.3,.3,.9);comp.addPass(bloom)} comp.addPass(new ShaderPass(PostFX)); const floorMat=new THREE.ShaderMaterial({vertexShader:FloorSh.vertexShader,fragmentShader:FloorSh.fragmentShader, uniforms:{uTime:{value:0},uScroll:{value:0}},transparent:true,side:THREE.DoubleSide,depthWrite:false}); const floor=new THREE.Mesh(new THREE.PlaneGeometry(400,700,1,1),floorMat); floor.rotation.x=-Math.PI/2;floor.position.set(0,-3,-250);scene.add(floor); const curve=new THREE.CatmullRomCurve3([ new THREE.Vector3(0,-2,10),new THREE.Vector3(0,-2,-25), new THREE.Vector3(-18,-2,-65),new THREE.Vector3(-22,-2,-95), new THREE.Vector3(-8,-2,-125),new THREE.Vector3(16,-2,-165), new THREE.Vector3(22,-2,-195),new THREE.Vector3(8,-2,-225), new THREE.Vector3(-16,-2,-265),new THREE.Vector3(-20,-2,-295), new THREE.Vector3(-5,-2,-325),new THREE.Vector3(14,-2,-365), new THREE.Vector3(18,-2,-395),new THREE.Vector3(5,-2,-425), new THREE.Vector3(0,-2,-460),new THREE.Vector3(0,-2,-490) ],false,'catmullrom',.3); function radialTex(sz,stops){ const cv=document.createElement('canvas');cv.width=sz;cv.height=sz; const ctx=cv.getContext('2d'),g=ctx.createRadialGradient(sz/2,sz/2,0,sz/2,sz/2,sz/2); stops.forEach(s=>g.addColorStop(s[0],s[1])); ctx.fillStyle=g;ctx.fillRect(0,0,sz,sz); return new THREE.CanvasTexture(cv)} function bakeplanetTex(sz,bands,seed){ const cv=document.createElement('canvas');cv.width=sz;cv.height=sz; const ctx=cv.getContext('2d'); const imgData=ctx.createImageData(sz,sz);const d=imgData.data; for(let y=0;y<sz;y++){for(let x=0;x<sz;x++){ let n=0,ax=x/sz*6+seed,ay=y/sz*6+seed; for(let o=0;o<4;o++){const f=Math.pow(2,o);n+=Math.sin(ax*f+Math.cos(ay*f*0.7))*Math.cos(ay*f+Math.sin(ax*f*0.5))/f} n=n*0.5+0.5;const bi=Math.floor(n*bands.length)%bands.length; const bc=bands[bi];const idx=(y*sz+x)*4;d[idx]=bc[0];d[idx+1]=bc[1];d[idx+2]=bc[2];d[idx+3]=255}} ctx.putImageData(imgData,0,0); return new THREE.CanvasTexture(cv)} const FresnelAtmoVS=`varying vec3 vNorm;varying vec3 vViewDir;void main(){vec4 wP=modelMatrix*vec4(position,1.);vNorm=normalize(normalMatrix*normal);vViewDir=normalize(cameraPosition-wP.xyz);gl_Position=projectionMatrix*viewMatrix*wP;}`; function fresnelAtmoFS(r,g,b){return `varying vec3 vNorm;varying vec3 vViewDir;void main(){float d=dot(vNorm,vViewDir);float f=pow(1.-abs(d),3.);gl_FragColor=vec4(${r},${g},${b},f*.6);}`} const p1Sz=M===true?256:512; const p1Tex=bakeplanetTex(p1Sz,[[60,80,160],[80,110,190],[100,140,210],[180,200,240],[220,230,250],[90,100,180],[70,90,170]],42); const planet1=new THREE.Mesh(new THREE.SphereGeometry(18,48,48),new THREE.MeshBasicMaterial({map:p1Tex})); planet1.position.set(-65,50,-220);scene.add(planet1); const p1Atmo=new THREE.Mesh(new THREE.SphereGeometry(20,48,48),new THREE.ShaderMaterial({vertexShader:FresnelAtmoVS,fragmentShader:fresnelAtmoFS('.3','.5','1.'),transparent:true,side:THREE.FrontSide,depthWrite:false})); p1Atmo.position.copy(planet1.position);scene.add(p1Atmo); const ringGeo=new THREE.RingGeometry(22,35,64); const ringCv=document.createElement('canvas');ringCv.width=512;ringCv.height=16; const ringCtx=ringCv.getContext('2d'); for(let x=0;x<512;x++){const n=Math.sin(x*.15)*Math.cos(x*.07)+Math.sin(x*.3)*.5;const a=Math.max(0,n*.5+.3); ringCtx.fillStyle=`rgba(140,160,200,${a*.35})`;ringCtx.fillRect(x,0,1,16)} const ringTex=new THREE.CanvasTexture(ringCv); const ringMat=new THREE.MeshBasicMaterial({map:ringTex,transparent:true,side:THREE.DoubleSide,depthWrite:false,opacity:.6}); const rings=new THREE.Mesh(ringGeo,ringMat); rings.position.copy(planet1.position);rings.rotation.x=Math.PI/2.5;rings.rotation.y=.3; if(!M)scene.add(rings); const p2Tex=bakeplanetTex(M===true?256:512,[[180,60,10],[220,100,20],[255,140,30],[160,40,5],[120,25,5],[255,180,50],[200,70,15]],77); const planet2=new THREE.Mesh(new THREE.SphereGeometry(10,32,32),new THREE.MeshBasicMaterial({map:p2Tex})); planet2.position.set(80,65,-350);scene.add(planet2); const p2Atmo=new THREE.Mesh(new THREE.SphereGeometry(11.2,32,32),new THREE.ShaderMaterial({vertexShader:FresnelAtmoVS,fragmentShader:fresnelAtmoFS('1.','.5','.15'),transparent:true,side:THREE.FrontSide,depthWrite:false})); p2Atmo.position.copy(planet2.position);scene.add(p2Atmo); const hazeArr=[]; const hazeDefs=[ {c:[20,28,65],a:.25,x:-30,y:15,z:-80,s:100}, {c:[18,25,55],a:.2,x:40,y:20,z:-170,s:120}, {c:[22,30,60],a:.18,x:-20,y:25,z:-280,s:110}, {c:[15,22,50],a:.22,x:30,y:10,z:-380,s:90}, {c:[20,25,55],a:.15,x:-40,y:30,z:-450,s:100}, {c:[45,22,60],a:.1,x:-55,y:40,z:-140,s:130}, {c:[40,18,55],a:.08,x:60,y:45,z:-300,s:110}, {c:[50,25,65],a:.07,x:-45,y:50,z:-400,s:100}, {c:[120,80,30],a:.06,x:50,y:40,z:-200,s:70}, {c:[100,65,20],a:.05,x:-60,y:50,z:-320,s:80}, {c:[90,60,25],a:.04,x:40,y:55,z:-420,s:60}, {c:[80,55,25],a:.06,x:0,y:-8,z:-120,s:130}, {c:[60,45,20],a:.05,x:0,y:-8,z:-300,s:120}, {c:[70,50,22],a:.04,x:0,y:-8,z:-430,s:100}, {c:[80,30,120],a:.12,x:-35,y:30,z:-90,s:90},{c:[30,80,100],a:.10,x:20,y:25,z:-100,s:100}, {c:[60,25,100],a:.08,x:-10,y:40,z:-110,s:110},{c:[40,70,90],a:.09,x:30,y:20,z:-85,s:80}, {c:[70,35,110],a:.07,x:-50,y:35,z:-95,s:70},{c:[25,65,85],a:.06,x:45,y:45,z:-105,s:90}, {c:[140,100,30],a:.08,x:-25,y:35,z:-240,s:100},{c:[160,110,25],a:.07,x:35,y:40,z:-255,s:85}, {c:[120,85,20],a:.06,x:-40,y:30,z:-260,s:110},{c:[180,130,40],a:.05,x:15,y:45,z:-245,s:75}, {c:[130,90,25],a:.07,x:50,y:25,z:-250,s:95},{c:[100,75,20],a:.06,x:-15,y:50,z:-265,s:80}, {c:[15,30,80],a:.12,x:-30,y:30,z:-390,s:100},{c:[20,40,100],a:.10,x:40,y:35,z:-405,s:120}, {c:[10,25,70],a:.08,x:-50,y:40,z:-410,s:90},{c:[25,45,110],a:.07,x:25,y:50,z:-395,s:80}, {c:[18,35,90],a:.09,x:-20,y:25,z:-415,s:110},{c:[30,50,120],a:.06,x:55,y:30,z:-400,s:70}, {c:[55,20,70],a:.06,x:-70,y:55,z:-50,s:100},{c:[20,55,75],a:.05,x:65,y:50,z:-150,s:110}, {c:[100,70,20],a:.04,x:-55,y:60,z:-200,s:90},{c:[40,25,65],a:.05,x:70,y:45,z:-330,s:100}, {c:[25,60,80],a:.06,x:-60,y:55,z:-360,s:80},{c:[90,60,15],a:.04,x:50,y:60,z:-440,s:95}, {c:[50,30,80],a:.05,x:-40,y:50,z:-470,s:85}, ]; hazeDefs.forEach(h=>{ const tex=radialTex(128,[[0,`rgba(${h.c[0]},${h.c[1]},${h.c[2]},${h.a})`], [.3,`rgba(${h.c[0]},${h.c[1]},${h.c[2]},${h.a*.35})`], [.6,`rgba(${h.c[0]},${h.c[1]},${h.c[2]},${h.a*.08})`],[1,'rgba(0,0,0,0)']]); const mat=new THREE.SpriteMaterial({map:tex,transparent:true,blending:THREE.AdditiveBlending,depthWrite:false}); const sp=new THREE.Sprite(mat);sp.scale.set(h.s,h.s,1);sp.position.set(h.x,h.y,h.z); sp.userData={bX:h.x,bY:h.y,ph:Math.random()*6.28,sp:.003+Math.random()*.006}; scene.add(sp);hazeArr.push(sp)}); const PC=M?800:4000,pG=new THREE.BufferGeometry(),pP=new Float32Array(PC*3),pC=new Float32Array(PC*3),pS=new Float32Array(PC); for(let i=0;i<PC;i++){ pP[i*3]=(Math.random()-.5)*150;pP[i*3+1]=Math.random()*70-10;pP[i*3+2]=-Math.random()*550; const warm=Math.random()<.15; if(warm){pC[i*3]=1;pC[i*3+1]=.82+Math.random()*.1;pC[i*3+2]=.55+Math.random()*.2} else{const b=.6+Math.random()*.4;pC[i*3]=b*.9;pC[i*3+1]=b*.92;pC[i*3+2]=b} pS[i]=M?.04+Math.random()*.04:.02+Math.random()*.04} pG.setAttribute('position',new THREE.BufferAttribute(pP,3)); pG.setAttribute('color',new THREE.BufferAttribute(pC,3)); pG.setAttribute('size',new THREE.BufferAttribute(pS,1)); scene.add(new THREE.Points(pG,new THREE.PointsMaterial({size:M?.05:.035,transparent:true,opacity:.55,vertexColors:true,sizeAttenuation:true,blending:THREE.AdditiveBlending,depthWrite:false}))); const orbGeo=new THREE.SphereGeometry(.06,8,8),orbs=[]; const orbPalette=[ [200,150,90,.35],[94,138,173,.3],[160,140,190,.25],[255,230,200,.2], [180,160,120,.3],[120,160,200,.25],[200,170,130,.3],[150,180,210,.2]]; for(let i=0;i<(M?25:55);i++){ const c=orbPalette[Math.floor(Math.random()*orbPalette.length)]; const col=new THREE.Color(c[0]/255,c[1]/255,c[2]/255); const o=new THREE.Mesh(orbGeo,new THREE.MeshBasicMaterial({color:col,transparent:true,opacity:c[3]})); o.position.set((Math.random()-.5)*70,Math.random()*40-3,-Math.random()*500); const sc=.4+Math.random()*2;o.scale.setScalar(sc); o.userData={bY:o.position.y,ph:Math.random()*6.28,sp:.12+Math.random()*.35,bX:o.position.x}; scene.add(o);orbs.push(o)} const shipGeo=new THREE.ConeGeometry(.25,.6,4);shipGeo.rotateX(Math.PI/2); const ships=[]; const wingAnchors=[]; for(let w=0;w<(M?4:12);w++){ const side=Math.random()<.5?-1:1; wingAnchors.push({x:side*(15+Math.random()*35),y:12+Math.random()*30,z:-Math.random()*480,f:w%2===0?'b':'r'})} function mkShip(f,wingIdx){ const col=f==='b'?0x5e8aad:0xc8965a; const m=new THREE.Mesh(shipGeo,new THREE.MeshBasicMaterial({color:col,transparent:true,opacity:.5})); let bP; if(wingIdx!==undefined){const wa=wingAnchors[wingIdx]; bP=new THREE.Vector3(wa.x+(Math.random()-.5)*6,wa.y+(Math.random()-.5)*4,wa.z+(Math.random()-.5)*6)} else{const side=Math.random()<.5?-1:1;bP=new THREE.Vector3(side*(15+Math.random()*40),12+Math.random()*30,-Math.random()*480)} m.position.copy(bP); const isStrafing=Math.random()<.15; m.userData={f,bP:bP.clone(),oR:isStrafing?20+Math.random()*15:4+Math.random()*10,oS:.1+Math.random()*.25,oPh:Math.random()*6.28,strafing:isStrafing}; scene.add(m);ships.push(m)} const fCount=M?8:28; for(let i=0;i<fCount;i++){ const wi=i<wingAnchors.length?i:undefined; mkShip('b',wi<wingAnchors.length/2?wi:undefined); mkShip('r',wi!==undefined&&wi>=wingAnchors.length/2?wi:undefined)} function mkCapGeo(){ const hull=new THREE.BoxGeometry(2.5,0.7,10).toNonIndexed(); const bridge=new THREE.BoxGeometry(1,0.8,2).toNonIndexed();bridge.translate(0,0.7,1.5); const eng1=new THREE.CylinderGeometry(0.25,0.35,2,8).toNonIndexed();eng1.rotateX(Math.PI/2);eng1.translate(0.8,-0.1,-5); const eng2=new THREE.CylinderGeometry(0.25,0.35,2,8).toNonIndexed();eng2.rotateX(Math.PI/2);eng2.translate(-0.8,-0.1,-5); const geos=[hull,bridge,eng1,eng2]; let totalVerts=0;geos.forEach(function(g){totalVerts+=g.attributes.position.count}); const pos=new Float32Array(totalVerts*3); let offset=0;geos.forEach(function(g){const p=g.attributes.position.array; for(let i=0;i<p.length;i++){pos[offset+i]=p[i]}offset+=p.length}); const merged=new THREE.BufferGeometry(); merged.setAttribute('position',new THREE.BufferAttribute(pos,3)); merged.computeVertexNormals(); return merged} const capMerged=mkCapGeo(),capEdge=new THREE.EdgesGeometry(capMerged),caps=[]; [[-15,18,-130,'b'],[15,22,-290,'r'],[-45,24,-430,'b'],[60,30,-160,'r']].forEach(function(d){ const col=d[3]==='b'?0x5e8aad:0xc8965a; const fillMat=new THREE.MeshBasicMaterial({color:0x0a0a18,transparent:true,opacity:0.7}); const fillMesh=new THREE.Mesh(capMerged,fillMat); const wireMat=new THREE.LineBasicMaterial({color:col,transparent:true,opacity:0.2}); const wireMesh=new THREE.LineSegments(capEdge,wireMat); const grp=new THREE.Group();grp.add(fillMesh);grp.add(wireMesh); grp.position.set(d[0],d[1],d[2]);grp.scale.setScalar(2); grp.userData={rS:0.015+Math.random()*0.02,bP:new THREE.Vector3(d[0],d[1],d[2]),fc:col}; scene.add(grp);caps.push(grp); const engCol=d[3]==='b'?'94,138,173':'200,150,90'; for(const ex of[-1.6,1.6]){ const gl=new THREE.Sprite(new THREE.SpriteMaterial({map:radialTex(64,[[0,'rgba('+engCol+',0.6)'],[0.3,'rgba('+engCol+',0.2)'],[1,'rgba(0,0,0,0)']]),transparent:true,blending:THREE.AdditiveBlending,depthWrite:false})); gl.scale.set(4,4,1);gl.position.set(d[0]+ex,d[1],d[2]-10);scene.add(gl);grp.userData['eng'+ex]=gl}}); const lasers=[],explosions=[],torpedoes=[],debris=[];let lastLT=0,lastTorpT=0; const beamGeo=new THREE.BoxGeometry(.06,.06,1); function fireLaser(){const bs=ships.filter(s=>s.userData.f==='b'),rs=ships.filter(s=>s.userData.f==='r'); if(!bs.length||!rs.length)return;const isB=Math.random()<.5; const sh=isB?bs[Math.floor(Math.random()*bs.length)]:rs[Math.floor(Math.random()*rs.length)]; const tg=isB?rs[Math.floor(Math.random()*rs.length)]:bs[Math.floor(Math.random()*bs.length)]; const dir=tg.position.clone().sub(sh.position);const len=dir.length(); const col=isB?0x7eb8dd:0xdda86a; const beam=new THREE.Mesh(new THREE.BoxGeometry(.08,.08,len),new THREE.MeshBasicMaterial({color:col,transparent:true,opacity:.8})); beam.position.copy(sh.position).add(dir.multiplyScalar(.5));beam.lookAt(tg.position); beam.userData={life:.25,ml:.25,ep:tg.position.clone()};scene.add(beam);lasers.push(beam); for(const p of[sh.position,tg.position]){ const gsp=new THREE.Sprite(new THREE.SpriteMaterial({map:radialTex(32,[[0,`rgba(${isB?'126,184,221':'221,168,106'},0.5)`],[1,'rgba(0,0,0,0)']]),transparent:true,blending:THREE.AdditiveBlending,depthWrite:false})); gsp.scale.set(1.5,1.5,1);gsp.position.copy(p);gsp.userData={life:.2,ml:.2};scene.add(gsp);explosions.push(gsp)}} function fireTorpedo(){if(caps.length<2)return; const ci=Math.floor(Math.random()*caps.length);const ti=(ci+1+Math.floor(Math.random()*(caps.length-1)))%caps.length; const sp=caps[ci].position.clone(),ep=caps[ti].position.clone(); const col=caps[ci].userData.fc; const torp=new THREE.Mesh(new THREE.SphereGeometry(.5,8,8),new THREE.MeshBasicMaterial({color:col,transparent:true,opacity:.9})); torp.position.copy(sp); const glTorp=new THREE.Sprite(new THREE.SpriteMaterial({map:radialTex(32,[[0,'rgba(255,240,200,0.6)'],[1,'rgba(0,0,0,0)']]),transparent:true,blending:THREE.AdditiveBlending,depthWrite:false})); glTorp.scale.set(3,3,1);glTorp.position.copy(sp); scene.add(torp);scene.add(glTorp); torp.userData={life:4,ml:4,sp:sp.clone(),ep,glow:glTorp};torpedoes.push(torp)} function boom(pos){ const flash=new THREE.Sprite(new THREE.SpriteMaterial({map:radialTex(64,[[0,'rgba(255,240,220,0.9)'],[.3,'rgba(255,200,100,0.4)'],[1,'rgba(0,0,0,0)']]),transparent:true,blending:THREE.AdditiveBlending,depthWrite:false})); flash.scale.set(3,3,1);flash.position.copy(pos);flash.userData={life:.4,ml:.4};scene.add(flash);explosions.push(flash); const ring=new THREE.Mesh(new THREE.RingGeometry(.1,1,16),new THREE.MeshBasicMaterial({color:0xffeedd,transparent:true,opacity:.7,side:THREE.DoubleSide,depthWrite:false})); ring.position.copy(pos);ring.lookAt(cam.position);ring.userData={life:.6,ml:.6,isRing:true};scene.add(ring);explosions.push(ring); for(let i=0;i<(M?3:7);i++){ const db=new THREE.Mesh(new THREE.BoxGeometry(.15,.15,.15),new THREE.MeshBasicMaterial({color:0xddccaa,transparent:true,opacity:.8})); db.position.copy(pos);db.userData={life:.8,ml:.8,vx:(Math.random()-.5)*8,vy:(Math.random()-.5)*8,vz:(Math.random()-.5)*8,rv:new THREE.Vector3(Math.random()*5,Math.random()*5,Math.random()*5)}; scene.add(db);debris.push(db)}} const TL=new THREE.TextureLoader(),imgs=[]; const IMG_MAX=7; function mkImg(url,pos){ const mat=new THREE.MeshBasicMaterial({transparent:true,opacity:1,side:THREE.DoubleSide,depthWrite:false,fog:false,color:new THREE.Color(1.15,1.15,1.15)}); const m=new THREE.Mesh(new THREE.PlaneGeometry(1,1),mat); m.position.set(pos[0],pos[1],pos[2]);m.userData.bb=true;m.visible=false; scene.add(m);imgs.push(m); const glowTex=radialTex(64,[[0,'rgba(200,150,90,0.08)'],[.3,'rgba(150,130,100,0.03)'],[.7,'rgba(80,80,120,0.01)'],[1,'rgba(0,0,0,0)']]); const glow=new THREE.Sprite(new THREE.SpriteMaterial({map:glowTex,transparent:true,blending:THREE.AdditiveBlending,depthWrite:false})); glow.scale.set(14,14,1);glow.position.copy(m.position); scene.add(glow); m.userData.glow=glow; TL.load(url,tex=>{tex.colorSpace=THREE.SRGBColorSpace;mat.map=tex;mat.needsUpdate=true; const a=tex.image.width/tex.image.height;let w,h; if(a>1){w=IMG_MAX;h=IMG_MAX/a}else{h=IMG_MAX;w=IMG_MAX*a} m.geometry.dispose();m.geometry=new THREE.PlaneGeometry(w,h);m.visible=true; glow.scale.set(w*1.8,h*1.8,1)}); return m} function placeAlongCurve(urls,centerT,spread){ const n=urls.length;urls.forEach((url,i)=>{ const t=Math.max(.01,Math.min(.99,centerT-spread/2+(spread*i/(n-1||1)))); const pt=curve.getPointAt(t),tn=curve.getTangentAt(t),nm=new THREE.Vector3(-tn.z,0,tn.x).normalize(); const side=i%2===0?-1:1,dist=M?5+Math.random()*2:7+Math.random()*3,y=3+Math.random()*2; const m=mkImg(url,[pt.x+nm.x*side*dist,y,pt.z+nm.z*side*dist]); m.userData.fO=Math.random()*6.28;m.userData.fS=.15+Math.random()*.25;m.userData.bY=y})} placeAlongCurve([ 'img/bioverno_EN.jpg', 'img/Lignin_EN.jpg', 'img/profi_EN.jpg', 'img/recognition_EN.jpg', 'img/UPM_OPTI_wrapper_a3.jpg', ],.18,.06); placeAlongCurve([ 'img/JanLonnqvist_Lookbook_Page_01.jpg', 'img/JanLonnqvist_Lookbook_Page_02.jpg', 'img/JanLonnqvist_Lookbook_Page_04.jpg', 'img/priima3.jpg', 'img/Capture77777.PNG', ],.35,.06); placeAlongCurve([ 'img/Screenshot-2023-11-08-at-18.19.41.png', 'img/20230926_165858.jpg', 'img/Screenshot-2023-11-08-at-18.17.01.png', 'img/DHL_CarouselV2_Artboard-1-copy-3.png', 'img/DHL_Localizations_Eindhoven_LinkedIn.jpg', 'img/Screenshot-2025-02-27-at-18.02.54.png', ],.53,.07); placeAlongCurve([ 'img/HeyLASmallIconsArrow.png', 'img/Core_FINAL-04.png', 'img/GLSPointLogo.png', 'img/00042_1_HU_App_expresstask_Print_841x336.png', 'img/00045_Net-Zero-visuals_Scope123-Recovered-06.png', 'img/carousels-02.png', ],.71,.06); const stG=new THREE.Group();scene.add(stG); for(let i=0;i<50;i++){const len=3+Math.random()*15; const g=new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-len)]); const warm=Math.random()<.3; const col=warm?new THREE.Color(.7,.5,.25):new THREE.Color(.35+Math.random()*.2,.38+Math.random()*.2,.5+Math.random()*.2); const l=new THREE.Line(g,new THREE.LineBasicMaterial({color:col,transparent:true,opacity:.015+Math.random()*.025})); l.position.set((Math.random()-.5)*80,Math.random()*30-3,-Math.random()*500);l.userData={sp:.2+Math.random()*.8,bX:l.position.x};stG.add(l)} const asteroids=[]; const astCount=M?15:40; for(let i=0;i<astCount;i++){ const geo=new THREE.IcosahedronGeometry(1,0); const pos=geo.attributes.position; for(let v=0;v<pos.count;v++){pos.setXYZ(v,pos.getX(v)+(Math.random()-.5)*.4,pos.getY(v)+(Math.random()-.5)*.4,pos.getZ(v)+(Math.random()-.5)*.4)} pos.needsUpdate=true;geo.computeVertexNormals(); const sc=.5+Math.random()*2.5; const ast=new THREE.Mesh(geo,new THREE.MeshBasicMaterial({color:new THREE.Color(.15+Math.random()*.08,.14+Math.random()*.06,.13+Math.random()*.05)})); ast.scale.setScalar(sc); ast.position.set((Math.random()-.5)*50,Math.random()*15-3,-140-Math.random()*40); ast.userData={rv:new THREE.Vector3((Math.random()-.5)*.3,(Math.random()-.5)*.3,(Math.random()-.5)*.3)}; scene.add(ast);asteroids.push(ast)} const shootingStars=[]; if(!M){for(let i=0;i<3;i++){ const ss=new THREE.Mesh(new THREE.SphereGeometry(.15,6,6),new THREE.MeshBasicMaterial({color:0xffffff,transparent:true,opacity:0})); const trailPts=[];for(let j=0;j<8;j++)trailPts.push(new THREE.Vector3(0,0,0)); const trailGeo=new THREE.BufferGeometry().setFromPoints(trailPts); const trail=new THREE.Line(trailGeo,new THREE.LineBasicMaterial({color:0xffffff,transparent:true,opacity:0})); scene.add(ss);scene.add(trail); const dir=new THREE.Vector3((Math.random()-.5)*.6,-(.3+Math.random()*.3),(Math.random()-.5)*.3).normalize(); ss.userData={active:false,timer:5+Math.random()*10,dir,speed:80+Math.random()*40,trail,trailGeo,trailPts,life:0,maxLife:1.5+Math.random()}; ss.visible=false;trail.visible=false; shootingStars.push(ss)}} const fogC=[new THREE.Color(0x08081a),new THREE.Color(0x0a0a20),new THREE.Color(0x0c081e),new THREE.Color(0x080c22),new THREE.Color(0x0a0a20),new THREE.Color(0x08081a)]; const fogD=[.0018,.0018,.0015,.0012,.0012,.001]; addEventListener('resize',()=>{cam.aspect=innerWidth/innerHeight;cam.updateProjectionMatrix();R.setSize(innerWidth,innerHeight);const rW=Math.floor(innerWidth*pxr),rH=Math.floor(innerHeight*pxr);comp.setSize(rW,rH);rTC()}); const loaderEl=document.getElementById('loader'),loaderFill=document.getElementById('loaderFill'); let lP=0,warpTriggered=false,warpTime=0,entryDone=false; const clock=new THREE.Clock(); function animate(){requestAnimationFrame(animate);const dt=clock.getDelta(),t=clock.getElapsedTime(); if(lP<100){lP=Math.min(100,lP+dt*70);loaderFill.style.width=lP+'%'; if(lP>=100&&!warpTriggered){warpTriggered=true;warpTime=t;loaderEl.classList.add('warp'); setTimeout(()=>loaderEl.classList.add('done'),1400)}} if(warpTriggered&&!entryDone){ const wP=Math.min(1,(t-warpTime)/2.5); const ease=1-Math.pow(1-wP,3); cam.fov=65+40*(1-ease);cam.updateProjectionMatrix(); cam.position.z=12+80*(1-ease); cam.position.y=6+30*(1-ease); if(wP>=1)entryDone=true} floorMat.uniforms.uTime.value=t;floorMat.uniforms.uScroll.value=sP; const zi=Math.min(5,Math.floor(sP*5.5)),ni=Math.min(5,zi+1),zf=(sP*5.5-zi)%1; scene.fog.color.lerp(new THREE.Color().lerpColors(fogC[zi],fogC[ni],zf),.03); R.setClearColor(scene.fog.color,1); scene.fog.density+=(fogD[zi]+(fogD[ni]-fogD[zi])*zf-scene.fog.density)*.03; const ct=Math.max(0,Math.min(.999,sP)),cPt=curve.getPointAt(ct),lPt=curve.getPointAt(Math.min(ct+.04,.999)); const mnx=M?0:(mx/innerWidth-.5)*2,mny=M?0:(my/innerHeight-.5)*2; const tY=cPt.y+6; cam.position.x+=(cPt.x+mnx*2-cam.position.x)*.05; cam.position.y+=(tY+mny*-.3-cam.position.y)*.05; cam.position.z+=(cPt.z-cam.position.z)*.05; cam.lookAt(lPt.x+mnx*.3,tY-1,lPt.z); imgs.forEach(m=>{ if(m.userData.bb)m.lookAt(cam.position); if(m.userData.fO!==undefined){ const ny=m.userData.bY+Math.sin(t*m.userData.fS+m.userData.fO)*.25; m.position.y=ny; if(m.userData.glow)m.userData.glow.position.copy(m.position)}}); planet1.rotation.y+=dt*.02;planet1.position.y=50+Math.sin(t*.03)*2;planet1.position.x=-65+Math.sin(t*.02)*3; p1Atmo.position.copy(planet1.position);if(!M){rings.position.copy(planet1.position);rings.rotation.z+=dt*.005} planet2.rotation.y+=dt*.035;planet2.position.y=65+Math.sin(t*.04+1)*1.5;planet2.position.x=80+Math.cos(t*.025)*2; p2Atmo.position.copy(planet2.position); orbs.forEach(o=>{ o.position.y=o.userData.bY+Math.sin(t*o.userData.sp+o.userData.ph)*.5; o.position.x=o.userData.bX+Math.sin(t*o.userData.sp*.7+o.userData.ph+1)*.3}); const pa=pG.attributes.position.array; for(let i=0;i<PC;i++){pa[i*3+1]+=Math.sin(t*.08+i*.01)*.0008;pa[i*3]+=Math.cos(t*.06+i*.015)*.0004} pG.attributes.position.needsUpdate=true; ships.forEach(s=>{const d=s.userData,o=d.oR,sp=d.oS,ph=d.oPh; if(d.strafing){s.position.x=d.bP.x+Math.sin(t*sp*.3+ph)*o;s.position.z=d.bP.z+Math.cos(t*sp*.2+ph)*o*.5;s.position.y=d.bP.y+Math.sin(t*sp*1.3+ph)*3; const nx=d.bP.x+Math.sin((t+.05)*sp*.3+ph)*o,nz=d.bP.z+Math.cos((t+.05)*sp*.2+ph)*o*.5;s.lookAt(nx,s.position.y,nz)} else{s.position.x=d.bP.x+Math.cos(t*sp+ph)*o;s.position.z=d.bP.z+Math.sin(t*sp+ph)*o;s.position.y=d.bP.y+Math.sin(t*sp*1.3+ph)*2; const nx=d.bP.x+Math.cos((t+.02)*sp+ph)*o,nz=d.bP.z+Math.sin((t+.02)*sp+ph)*o;s.lookAt(nx,s.position.y,nz)}}); caps.forEach(c=>{c.rotation.y+=c.userData.rS*dt;c.position.x=c.userData.bP.x+Math.sin(t*.04)*3;c.position.y=c.userData.bP.y+Math.sin(t*.06)*1; for(const k of Object.keys(c.userData)){if(k.startsWith('eng')){const eg=c.userData[k];eg.position.x=c.position.x+parseFloat(k.slice(3));eg.position.y=c.position.y;eg.position.z=c.position.z-10}}}); if(t-lastLT>.12+Math.random()*.2){fireLaser();lastLT=t} if(!M&&t-lastTorpT>2+Math.random()*3){fireTorpedo();lastTorpT=t} for(let i=lasers.length-1;i>=0;i--){const l=lasers[i];l.userData.life-=dt;l.material.opacity=(l.userData.life/l.userData.ml)*.8; if(l.userData.life<=0){scene.remove(l);l.geometry.dispose();l.material.dispose();lasers.splice(i,1);if(Math.random()<.25)boom(l.userData.ep)}} for(let i=torpedoes.length-1;i>=0;i--){const tp=torpedoes[i];tp.userData.life-=dt; const pr=1-tp.userData.life/tp.userData.ml; tp.position.lerpVectors(tp.userData.sp,tp.userData.ep,pr); tp.userData.glow.position.copy(tp.position); if(tp.userData.life<=0){scene.remove(tp);scene.remove(tp.userData.glow);tp.geometry.dispose();tp.material.dispose();tp.userData.glow.material.dispose();torpedoes.splice(i,1);boom(tp.userData.ep)}} for(let i=explosions.length-1;i>=0;i--){const e=explosions[i];e.userData.life-=dt;const p=1-e.userData.life/e.userData.ml; if(e.userData.isRing){e.scale.setScalar(1+p*6);e.material.opacity=Math.max(0,.7*(1-p*1.5))} else if(e.isSprite){e.scale.setScalar((3+p*4));e.material.opacity=Math.max(0,1-p*1.5)} else{e.scale.setScalar(1+p*4);e.material.opacity=Math.max(0,1-p*1.4)} if(e.userData.life<=0){scene.remove(e);if(e.geometry)e.geometry.dispose();e.material.dispose();explosions.splice(i,1)}} for(let i=debris.length-1;i>=0;i--){const d=debris[i];d.userData.life-=dt; d.position.x+=d.userData.vx*dt;d.position.y+=d.userData.vy*dt;d.position.z+=d.userData.vz*dt; d.rotation.x+=d.userData.rv.x*dt;d.rotation.y+=d.userData.rv.y*dt; d.material.opacity=Math.max(0,d.userData.life/d.userData.ml*.8); if(d.userData.life<=0){scene.remove(d);d.geometry.dispose();d.material.dispose();debris.splice(i,1)}} const absV=Math.abs(sV); stG.children.forEach(l=>{l.position.x=l.userData.bX+Math.sin(t*.12*l.userData.sp)*1.5; l.material.opacity=(.015+Math.random()*.025)+absV*.15; l.scale.z=1+absV*3}); hazeArr.forEach(sp=>{ sp.position.x=sp.userData.bX+Math.sin(t*sp.userData.sp+sp.userData.ph)*4; sp.position.y=sp.userData.bY+Math.cos(t*sp.userData.sp*.6+sp.userData.ph)*2}); asteroids.forEach(a=>{a.rotation.x+=a.userData.rv.x*dt;a.rotation.y+=a.userData.rv.y*dt;a.rotation.z+=a.userData.rv.z*dt}); shootingStars.forEach(ss=>{const d=ss.userData; if(!d.active){d.timer-=dt;if(d.timer<=0){d.active=true;d.life=0; ss.position.set((Math.random()-.5)*100,40+Math.random()*30,-100-Math.random()*300); d.dir.set((Math.random()-.5)*.6,-(.3+Math.random()*.3),(Math.random()-.5)*.3).normalize(); ss.visible=true;d.trail.visible=true; for(let j=0;j<d.trailPts.length;j++)d.trailPts[j].copy(ss.position)}} else{d.life+=dt;const prog=d.life/d.maxLife; ss.position.addScaledVector(d.dir,d.speed*dt); ss.material.opacity=prog<.1?prog*10:Math.max(0,1-(prog-.1)/.9); d.trail.material.opacity=ss.material.opacity*.4; d.trailPts.pop();d.trailPts.unshift(ss.position.clone()); d.trailGeo.setFromPoints(d.trailPts); if(d.life>=d.maxLife){d.active=false;d.timer=5+Math.random()*10;ss.visible=false;d.trail.visible=false}}}); if(absV>.3&&!M){ const sl=new THREE.Line(new THREE.BufferGeometry().setFromPoints([new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-2-absV*4)]), new THREE.LineBasicMaterial({color:0xffffff,transparent:true,opacity:.15})); sl.position.set(cam.position.x+(Math.random()-.5)*10,cam.position.y+(Math.random()-.5)*6,cam.position.z-5-Math.random()*10); sl.userData={life:.3,ml:.3};scene.add(sl);lasers.push(sl)} updZ(); comp.passes[comp.passes.length-1].uniforms.uTime.value=t; sV*=.92;comp.render()} animate();setTimeout(updZ,200);
</script>
</body>
</html>
